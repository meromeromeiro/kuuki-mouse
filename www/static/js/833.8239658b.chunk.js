"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[833],{3412:(e,t,n)=>{n.d(t,{Zk:()=>a,hv:()=>s,yL:()=>r});const s="proxy.moonchan.xyz";function a(e,t){const n=new URL(e),a="https://"+s+n.pathname+n.search;if(!t)return fetch(a,{headers:{"X-Host":n.hostname}});if(t.headers||(t.headers={}),t.headers instanceof Headers)t.headers.append("X-Host",n.hostname);else if(Array.isArray(t.headers))t.headers.push(["X-Host",n.hostname]);else{t.headers["X-Host"]=n.hostname}return fetch(a,t)}function r(e){if(console.log(e),""===e)return e;const t=new URL(e);return t.searchParams.set("proxy_host",t.hostname),t.hostname=s,t.toString()}},3833:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var s=n(5043),a=n(3412),r=n(2370),o=n(5857);var h=n(579);const c=()=>{const[e,t]=(0,s.useState)(""),[n,c]=(0,s.useState)(""),[p,l]=(0,s.useState)("");(0,s.useEffect)((()=>{const t=/https:\/\/[^\s/$.?#].[^\s]*/;(()=>{const n=e.match(t);let s=(0,a.yL)(n||"");if(p){const e=encodeURIComponent(p);s+=(s.includes("?")?"&":"?")+`proxy_referer=${e}`}c(s)})()}),[e,p]),(0,s.useEffect)((()=>{try{"sinaimg.cn"===function(e){try{const t=e.split(".");return t.length>2?t.slice(-2).join("."):e}catch{throw new Error("Invalid URL format")}}(new URL(e).hostname)&&l("https://weibo.com/")}catch(t){console.log(t)}}),[e]);const i=e=>{e.target.select()};return(0,h.jsxs)(r.g,{children:[(0,h.jsx)(o.A,{}),(0,h.jsxs)("div",{className:"h-full",onDrop:e=>{e.preventDefault();const n=e.dataTransfer.getData("text");t(n)},onDragOver:e=>{e.preventDefault()},children:[(0,h.jsx)("input",{type:"text",value:e,onChange:e=>{t(e.target.value)},onMouseEnter:i,placeholder:"\u8f93\u5165 URL, \u6216\u8005\u76f4\u63a5\u6309 Ctrl+V, \u6216\u8005\u62d6\u52a8\u8fde\u63a5\u5230\u6b64\u9875\u9762",style:{width:"100%",padding:"8px",marginBottom:"10px"}}),(0,h.jsx)("input",{type:"text",value:p,onChange:e=>{l(e.target.value)},onMouseEnter:i,placeholder:"\u8f93\u5165 referer URL",style:{width:"100%",padding:"8px",marginBottom:"10px"}}),(0,h.jsx)("input",{type:"text",value:n,onMouseEnter:i,readOnly:!0,placeholder:"GPT\u662f\u6211\u7239",style:{width:"100%",padding:"8px",marginBottom:"10px"}})]})]})}}}]);
//# sourceMappingURL=833.8239658b.chunk.js.map