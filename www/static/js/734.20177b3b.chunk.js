"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[734],{3412:(e,t,s)=>{s.d(t,{Zk:()=>a,hv:()=>r,yL:()=>n});const r="proxy.moonchan.xyz";function a(e,t){const s=new URL(e),a="https://"+r+s.pathname+s.search;if(!t)return fetch(a,{headers:{"X-Host":s.hostname}});if(t.headers||(t.headers={}),t.headers instanceof Headers)t.headers.append("X-Host",s.hostname);else if(Array.isArray(t.headers))t.headers.push(["X-Host",s.hostname]);else{t.headers["X-Host"]=s.hostname}return fetch(a,t)}function n(e){if(console.log(e),""===e)return e;const t=new URL(e);return t.searchParams.set("proxy_host",t.hostname),t.hostname=r,t.toString()}},1734:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var r=s(5043),a=s(3412),n=s(579);const o=e=>{let{imageUrl:t,text:s}=e;const[a,o]=(0,r.useState)(""),[i,c]=(0,r.useState)("");return(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("img",{src:t,alt:"\u9884\u89c8",className:"w-1/2 h-auto",referrerPolicy:"no-referrer"}),(0,n.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t.replace(/^https:/,"http:")+"\n").then((()=>{o("\u56fe\u7247\u5730\u5740\u5df2\u590d\u5236: "+t.replace(/^https:/,"http:")),setTimeout((()=>o("")),3e3)})).catch((e=>{console.error("\u590d\u5236\u5931\u8d25:",e),o("\u590d\u5236\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),setTimeout((()=>o("")),3e3)}))},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"\u590d\u5236\u56fe\u7247\u5730\u5740"}),a&&(0,n.jsx)("p",{className:"mt-2 text-green-500",children:a})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:async()=>{c("\u53d1\u9001\u4e2d...");const e={"Content-Type":"application/json"},r=JSON.stringify({p:t.replace(/^https:/,"http:"),txt:s});try{const s=await fetch("https://moonchan.xyz/api/v2/?bid=104&tid=135803",{method:"POST",credentials:"include",headers:e,body:r});if(s.ok)c("\u53d1\u9001\u6210\u529f\uff01"),setTimeout((()=>c("")),3e3);else{const e=await s.text();console.error("\u53d1\u9001\u5230\u6708\u5c9b\u5931\u8d25\u54cd\u5e94:",s.status,s.statusText,e),c(`\u53d1\u9001\u5931\u8d25: ${s.status} ${s.statusText} - ${e.substring(0,100)}...`),setTimeout((()=>c("")),5e3)}fetch("https://moonchan.xyz/api/v2/random?table=bilicover",{method:"POST",credentials:"include",headers:e,body:t.replace(/^https:/,"http:")})}catch(a){console.error("\u53d1\u9001\u5230\u6708\u5c9b\u65f6\u53d1\u751f\u9519\u8bef:",a),c(`\u53d1\u9001\u5931\u8d25: ${a.message}`),setTimeout((()=>c("")),5e3)}},className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600",children:"\u53d1\u9001\u5230\u6708\u5c9b"}),i&&(0,n.jsx)("p",{className:"mt-2 "+(i.includes("\u5931\u8d25")?"text-red-500":"text-green-500"),children:i})]})]})]})},i=e=>{let{id:t,text:s}=e;const[i,c]=(0,r.useState)(null),[l,h]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{const e=await(0,a.Zk)(`https://apiv2.magecorn.com/bilicover/get?type=bv&id=${t}&client=2.6.0`,{method:"GET"});if(!e.ok)throw new Error("Network response was not ok"+e.statusText.toString());const s=await e.json();if(!s||!s.url)throw new Error("\u7ed3\u679c\u4e2d\u672a\u627e\u5230 'url' \u5c5e\u6027");c(s.url)}catch(e){u(e.message)}finally{h(!1)}})()}),[t]),l?(0,n.jsx)("div",{children:"Loading..."}):d?(0,n.jsxs)("div",{children:["Error: ",d]}):(0,n.jsx)(o,{imageUrl:i,text:s})},c=e=>{let{id:t,text:s}=e;const[i,c]=(0,r.useState)(null),[l,h]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{const e=await(0,a.Zk)(`https://apiv2.magecorn.com/bilicover/get?type=live&id=${t}&client=2.6.0`,{method:"GET"});if(!e.ok)throw new Error("Network response was not ok"+e.statusText.toString());const s=await e.json();if(!s||!s.url)throw new Error("\u7ed3\u679c\u4e2d\u672a\u627e\u5230 'url' \u5c5e\u6027");c(s.url)}catch(e){u(e.message)}finally{h(!1)}})()}),[t]),l?(0,n.jsx)("div",{children:"Loading..."}):d?(0,n.jsxs)("div",{children:["Error: ",d]}):(0,n.jsx)(o,{imageUrl:i,text:s})},l=e=>{let{id:t,text:s}=e;const[o,l]=(0,r.useState)(null),[h,d]=(0,r.useState)(null),[u,p]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{const e=await(0,a.Zk)(`https://apiv2.magecorn.com/bilicover/get?type=b23&id=${t}&client=2.6.0`,{method:"GET"});if(!e.ok)throw new Error("Network response was not ok"+e.statusText.toString());const s=await e.json();if(!s||!s.result)throw new Error("\u7ed3\u679c\u4e2d\u672a\u627e\u5230 'result' \u5c5e\u6027");const r=s.result,n=new URL(r),o=n.pathname.split("/video/")[1],i=n.pathname.split("/")[1];l(o),d(i)}catch(e){m(e.message)}finally{p(!1)}})()}),[t]),u?(0,n.jsx)("div",{children:"Loading..."}):x?(0,n.jsxs)("div",{children:["Error: ",x]}):o?(0,n.jsx)(i,{id:o,text:s}):(0,n.jsx)(c,{id:h,text:s})};var h=s(2370),d=s(5857);const u=()=>{const[e,t]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[o,u]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),m=e=>{const t=e.match(/https?:\/\/(?:www\.)?b23\.tv\/(\w+)/),s=e.match(/https?:\/\/(?:www\.)?bilibili\.com\/video\/(\w+)/),r=e.match(/https?:\/\/live\.bilibili\.com\/(\w+)/);a(t?t[1]:""),u(s?s[1]:""),x(r?r[1]:"")},w=e=>{e.preventDefault();const s=(e.clipboardData||window.clipboardData).getData("Text");t(s),m(s)};return(0,r.useEffect)((()=>(window.addEventListener("paste",w),()=>{window.removeEventListener("paste",w)}))),(0,n.jsxs)(h.g,{children:[(0,n.jsx)(d.A,{}),(0,n.jsxs)("div",{className:"h-full",onDrop:e=>{e.preventDefault();const s=e.dataTransfer.getData("text");t(s),m(s)},onDragOver:e=>{e.preventDefault()},children:[(0,n.jsx)("input",{type:"text",value:e,onChange:e=>{const s=e.target.value;t(s),m(s)},onMouseEnter:e=>{e.target.select()},placeholder:"\u8f93\u5165 URL, \u6216\u8005\u76f4\u63a5\u6309 Ctrl+V, \u6216\u8005\u62d6\u52a8\u8fde\u63a5\u5230\u6b64\u9875\u9762",style:{width:"100%",padding:"8px",marginBottom:"10px"}}),s&&(0,n.jsx)(l,{id:s,text:e}),o&&(0,n.jsx)(i,{id:o,text:e}),p&&(0,n.jsx)(c,{id:p,text:e}),(0,n.jsxs)("div",{children:["\u540e\u7aef\u652f\u6301(\u65e0\u65ad):",(0,n.jsx)("a",{className:"text-blue-500 hover:text-green-500 underline",href:"https://bilicover.magecorn.com/help",children:"https://bilicover.magecorn.com/help"})]})]})]})}}}]);
//# sourceMappingURL=734.20177b3b.chunk.js.map