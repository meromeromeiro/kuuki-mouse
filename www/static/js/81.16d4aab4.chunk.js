"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[81],{81:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var i=o(5043),l=o(7169),n=o(3523),r=o(3460),a=o(3861),s=o(6021),d=o(9132),c=o(6925),p=o(5674),u=o(8996),g=o(579);const A=[{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"A",label:"\u64cd\u4f5c A",description:"\u6267\u884c\u4e86\u64cd\u4f5cA",price:10.5},{id:"B",label:"\u64cd\u4f5c B",description:"\u6267\u884c\u4e86\u64cd\u4f5cB",price:25},{id:"C",label:"\u64cd\u4f5c C",description:"\u6267\u884c\u4e86\u64cd\u4f5cC",price:99.9}],m=(0,i.memo)((e=>{let{item:t,onDelete:o,onEdit:i}=e;return(0,g.jsxs)(l.A,{style:b.logItem,children:[(0,g.jsxs)(l.A,{style:b.logContent,children:[(0,g.jsxs)(n.A,{style:b.logText,children:["\u65f6\u95f4: ",t.timestamp]}),(0,g.jsxs)(n.A,{style:b.logText,children:["No: ",(0,g.jsx)(n.A,{style:{fontWeight:"bold"},children:t.sequence})]}),(0,g.jsxs)(n.A,{style:b.logText,children:["\u63cf\u8ff0: ",t.description]}),(0,g.jsxs)(n.A,{style:b.logText,children:["\u4ef7\u683c: \xa5",t.price.toFixed(2)]})]}),(0,g.jsxs)(l.A,{style:b.logActions,children:[(0,g.jsx)(x,{title:"\u7f16\u8f91",onPress:()=>i(t),style:b.logActionButtonEdit,textStyle:b.logActionButtonText}),(0,g.jsx)(x,{title:"\u5220\u9664",onPress:()=>o(t.id),style:b.logActionButtonDelete,textStyle:b.logActionButtonText})]})]})})),x=e=>{let{title:t,onPress:o,style:i,textStyle:l,disabled:a}=e;return(0,g.jsx)(r.A,{onPress:o,disabled:a,style:e=>{let{pressed:t}=e;return[b.buttonBase,i,{opacity:a?.5:t?.6:1}]},children:(0,g.jsx)(n.A,{style:[b.buttonTextBase,l],children:t})})};function h(){const[e,t]=(0,i.useState)(1),[o,r]=(0,i.useState)([]),[u,h]=(0,i.useState)([]),[f,y]=(0,i.useState)(null),[C,j]=(0,i.useState)(!1),[B,S]=(0,i.useState)(""),[T,k]=(0,i.useState)(""),[w,z]=(0,i.useState)(""),[D,v]=(0,i.useState)(!1),[I,P]=(0,i.useState)(null),[R,F]=(0,i.useState)(""),[H,L]=(0,i.useState)(""),[W,q]=(0,i.useState)(""),V=(0,i.useCallback)(((o,i)=>{const l=new Date,n=parseFloat(i)||0,r={id:Date.now().toString()+Math.random().toString(),timestamp:`${l.toLocaleDateString()} ${l.toLocaleTimeString()}.${String(l.getMilliseconds()).padStart(3,"0")}`,sequence:e,description:o,price:n};h((e=>[r,...e])),t((e=>e+1)),y(null)}),[e]),N=()=>{a.A.dismiss(),j(!1),z("")},O=(0,i.useCallback)((()=>{0===u.length?(h(o),r(u)):(r(u),h([]))}),[u,o]),E=(0,i.useCallback)((e=>{const t=u.find((t=>t.id===e));t&&(y(t),h((t=>t.filter((t=>t.id!==e)))))}),[u]),M=(0,i.useCallback)((()=>{f&&(h((e=>[f,...e])),y(null))}),[f]),$=(0,i.useCallback)((e=>{P(e),F(e.description),L(String(e.price)),q(""),v(!0)}),[]),_=(0,i.useCallback)((()=>{a.A.dismiss();const e=parseFloat(H);""!==R.trim()?isNaN(e)||""===H.trim()?q("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u4ef7\u683c\u6570\u5b57"):I&&(h((t=>t.map((t=>t.id===I.id?{...t,description:R,price:e}:t)))),v(!1),P(null),q(""),y(null)):q("\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a")}),[I,R,H]),G=(0,i.useCallback)((()=>{a.A.dismiss(),v(!1),P(null),q("")}),[]),J=(0,i.useCallback)((e=>{let{item:t}=e;return(0,g.jsx)(m,{item:t,onDelete:E,onEdit:$})}),[E,$]);return(0,g.jsxs)(s.A,{style:b.safeContainer,children:[(0,g.jsx)(d.A,{animationType:"fade",transparent:!0,visible:C,onRequestClose:N,children:(0,g.jsx)(l.A,{style:b.modalOverlay,children:(0,g.jsxs)(l.A,{style:b.modalContent,children:[(0,g.jsx)(n.A,{style:b.modalTitle,children:"\u81ea\u5b9a\u4e49\u8f93\u5165"}),(0,g.jsx)(c.A,{style:b.modalInput,placeholder:"\u8f93\u5165\u63cf\u8ff0 (\u5fc5\u586b)",value:B,onChangeText:S,maxLength:50}),(0,g.jsx)(c.A,{style:b.modalInput,placeholder:"\u8f93\u5165\u4ef7\u683c (\u5fc5\u586b)",value:T,onChangeText:k,keyboardType:"decimal-pad",maxLength:10}),w?(0,g.jsx)(n.A,{style:b.errorText,children:w}):null,(0,g.jsxs)(l.A,{style:b.modalButtonRow,children:[(0,g.jsx)(x,{title:"\u53d6\u6d88",onPress:N,style:b.modalButtonCancel}),(0,g.jsx)(x,{title:"\u786e\u5b9a",onPress:()=>{a.A.dismiss();const e=parseFloat(T);""!==B.trim()?isNaN(e)||""===T.trim()?z("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u4ef7\u683c\u6570\u5b57"):(V(B,e),j(!1),z("")):z("\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a")},style:b.modalButtonConfirm})]})]})})}),(0,g.jsx)(d.A,{animationType:"fade",transparent:!0,visible:D,onRequestClose:G,children:(0,g.jsx)(l.A,{style:b.modalOverlay,children:(0,g.jsxs)(l.A,{style:b.modalContent,children:[(0,g.jsx)(n.A,{style:b.modalTitle,children:"\u7f16\u8f91\u65e5\u5fd7"}),(0,g.jsx)(c.A,{style:b.modalInput,placeholder:"\u8f93\u5165\u63cf\u8ff0 (\u5fc5\u586b)",value:R,onChangeText:F,maxLength:50}),(0,g.jsx)(c.A,{style:b.modalInput,placeholder:"\u8f93\u5165\u4ef7\u683c (\u5fc5\u586b)",value:H,onChangeText:L,keyboardType:"decimal-pad",maxLength:10}),W?(0,g.jsx)(n.A,{style:b.errorText,children:W}):null,(0,g.jsxs)(l.A,{style:b.modalButtonRow,children:[(0,g.jsx)(x,{title:"\u53d6\u6d88",onPress:G,style:b.modalButtonCancel}),(0,g.jsx)(x,{title:"\u786e\u5b9a",onPress:_,style:b.modalButtonConfirm})]})]})})}),(0,g.jsxs)(l.A,{style:b.topControlContainer,children:[(0,g.jsx)(n.A,{style:b.seqLabel,children:"\u5e8f\u5217\u53f7:"}),(0,g.jsx)(x,{title:"-",onPress:()=>{t((e=>Math.max(0,e-1)))},style:b.incDecButton,textStyle:b.incDecText}),(0,g.jsx)(c.A,{style:b.sequenceInput,value:String(e),onChangeText:e=>{if(""===e)return void t(0);const o=parseInt(e,10);!isNaN(o)&&o>=0&&t(o)},keyboardType:"number-pad",textAlign:"center",maxLength:8}),(0,g.jsx)(x,{title:"+",onPress:()=>{t((e=>e+1))},style:b.incDecButton,textStyle:b.incDecText})]}),(0,g.jsxs)(l.A,{style:b.mainContent,children:[(0,g.jsxs)(l.A,{style:b.leftPanel,children:[A.map((e=>(0,g.jsx)(x,{title:e.label,onPress:()=>V(e.description,e.price),style:b.actionButton},e.id))),(0,g.jsx)(x,{title:"\u81ea\u5b9a\u4e49\u8f93\u5165",onPress:()=>{S(""),k(""),z(""),j(!0)},style:[b.actionButton,b.customButton]}),(0,g.jsx)(x,{title:"\u6e05\u7a7a\u65e5\u5fd7",onPress:O,style:b.clearButton}),f&&(0,g.jsx)(x,{title:"\u64a4\u9500\u5220\u9664",onPress:M,style:b.undoButton})]}),(0,g.jsxs)(l.A,{style:b.rightPanel,children:[(0,g.jsx)(n.A,{style:b.logHeader,children:"\u64cd\u4f5c\u65e5\u5fd7 \u25bc"}),(0,g.jsx)(p.A,{data:u,renderItem:J,keyExtractor:e=>e.id,style:b.logList,contentContainerStyle:{paddingBottom:10},ListEmptyComponent:(0,g.jsx)(n.A,{style:b.emptyLog,children:"\u6682\u65e0\u65e5\u5fd7\u8bb0\u5f55"})})]})]})]})}const b=u.A.create({safeContainer:{flex:1,backgroundColor:"#f0f0f0"},topControlContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingVertical:10,paddingHorizontal:15,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#ddd",height:60},seqLabel:{marginRight:15,fontSize:16},sequenceInput:{borderWidth:1,borderColor:"#ccc",paddingVertical:5,paddingHorizontal:10,marginHorizontal:8,fontSize:18,minWidth:80,borderRadius:4,backgroundColor:"#fff"},incDecButton:{width:40,height:40,paddingVertical:0,paddingHorizontal:0,justifyContent:"center",alignItems:"center",backgroundColor:"#007AFF",borderRadius:20},incDecText:{fontSize:24,fontWeight:"bold",lineHeight:28},mainContent:{flex:1,flexDirection:"row",maxHeight:"100%"},leftPanel:{flex:2,borderRightWidth:1,borderRightColor:"#ccc",padding:10,backgroundColor:"#e9e9e9",justifyContent:"flex-start",alignItems:"stretch",overflow:"scroll",maxHeight:"100vh"},rightPanel:{flex:3,padding:5,backgroundColor:"#fff",overflow:"scroll",maxHeight:"100vh"},logHeader:{fontSize:16,fontWeight:"bold",textAlign:"center",marginBottom:5,color:"#555"},logList:{flex:1},emptyLog:{textAlign:"center",marginTop:20,color:"#888",fontStyle:"italic"},buttonBase:{paddingVertical:12,paddingHorizontal:10,borderRadius:5,alignItems:"center",marginVertical:5},buttonTextBase:{color:"#fff",fontSize:15,fontWeight:"500"},actionButton:{backgroundColor:"#007AFF"},customButton:{backgroundColor:"#4CD964",marginTop:10},clearButton:{backgroundColor:"#FF3B30",marginTop:10},undoButton:{backgroundColor:"#FF9500",marginTop:10},logItem:{borderWidth:1,borderColor:"#c0c0c0",backgroundColor:"#f9f9f9",padding:8,marginVertical:4,marginHorizontal:5,borderRadius:4,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:1,elevation:1,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},logContent:{flex:1},logActions:{flexDirection:"column",marginLeft:8},logActionButtonEdit:{backgroundColor:"#5AC8FA",paddingVertical:5,paddingHorizontal:8,marginBottom:4,borderRadius:3},logActionButtonDelete:{backgroundColor:"#FF6B6B",paddingVertical:5,paddingHorizontal:8,borderRadius:3},logActionButtonText:{fontSize:12,color:"white"},logText:{fontSize:13,color:"#333",marginBottom:2},modalOverlay:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContent:{margin:20,backgroundColor:"white",borderRadius:10,padding:25,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5,width:"85%",maxWidth:400},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:15},modalInput:{width:"100%",borderWidth:1,borderColor:"#ccc",borderRadius:4,padding:10,marginBottom:10,fontSize:16},errorText:{color:"red",fontSize:12,alignSelf:"flex-start",marginBottom:10,marginLeft:5},modalButtonRow:{flexDirection:"row",justifyContent:"space-around",width:"100%",marginTop:10},modalButtonCancel:{backgroundColor:"#aaa",flex:1,marginHorizontal:5},modalButtonConfirm:{backgroundColor:"#007AFF",flex:1,marginHorizontal:5}})}}]);
//# sourceMappingURL=81.16d4aab4.chunk.js.map