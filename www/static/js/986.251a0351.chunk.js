"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[986],{6986:(e,s,l)=>{l.r(s),l.d(s,{FileUploader:()=>o,default:()=>c});var a=l(5043),t=l(579);const n=e=>{let{file:s}=e;const[l,n]=(0,a.useState)("idle"),[i,r]=(0,a.useState)(null),[c,o]=(0,a.useState)("");if((0,a.useEffect)((()=>{s&&d()}),[s]),!s)return(0,t.jsx)("div",{children:"\u6ca1\u6709\u9009\u62e9\u6587\u4ef6"});const d=async()=>{n("uploading"),o("");try{const e=await fetch("https://wsl.moonchan.xyz/api/files/upload",{method:"PUT",body:s,headers:{"Content-Type":s.type}});if(!e.ok)throw new Error("\u4e0a\u4f20\u5931\u8d25");const l=await e.json();r(`https://chat.moonchan.xyz/api/files/${l.id}/${s.name}`),n("done")}catch(e){n("error"),o(e.message)}},x=(s.size/1048576).toFixed(2);return(0,t.jsxs)("div",{className:"p-6 max-w mx-auto bg-white rounded-xl shadow-md space-y-4",children:[(0,t.jsxs)("ul",{className:"list-disc ml-5 space-y-2",children:[(0,t.jsxs)("li",{children:["\u6587\u4ef6\u540d: ",(0,t.jsx)("span",{className:"font-mono",children:s.name})]}),(0,t.jsxs)("li",{children:["\u6587\u4ef6\u7c7b\u578b: ",(0,t.jsx)("span",{className:"font-mono",children:s.type||"\u672a\u77e5"})]}),(0,t.jsxs)("li",{children:["\u6587\u4ef6\u5927\u5c0f: ",(0,t.jsxs)("span",{className:"font-mono",children:[x," MB"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:["uploading"===l&&(0,t.jsx)("span",{className:"text-blue-500",children:"\u4e0a\u4f20\u4e2d..."}),"done"===l&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-green-500",children:"\u4e0a\u4f20\u6210\u529f\uff01"}),(0,t.jsx)("a",{href:i,download:!0,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"\u4e0b\u8f7d\u6587\u4ef6"}),(0,t.jsx)("button",{onClick:()=>{i&&navigator.clipboard.writeText(i).then((()=>{}))},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"\u590d\u5236\u94fe\u63a5"})]}),"error"===l&&(0,t.jsx)("span",{className:"text-red-500",children:c})]})]})};var i=l(2370),r=l(5857);function c(){return(0,t.jsxs)(i.g,{children:[(0,t.jsx)(r.A,{}),(0,t.jsx)("iframe",{src:"https://chat.moonchan.xyz/api/files/upload",className:"w-full h-full flex-grow border-0",title:"Content"})]})}function o(){const[e,s]=(0,a.useState)([]);return(0,t.jsxs)(i.g,{children:[(0,t.jsx)(r.A,{}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6 ",children:[(0,t.jsxs)("label",{className:"block mb-8",children:[(0,t.jsx)("span",{className:"sr-only",children:"\u9009\u62e9\u4e0a\u4f20\u6587\u4ef6"}),(0,t.jsx)("input",{type:"file",multiple:!0,onChange:async e=>{const l=Array.from(e.target.files);0!==l.length&&s(l)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.map(((e,s)=>(console.log(e),(0,t.jsx)(n,{file:e},s))))]})]})}}}]);
//# sourceMappingURL=986.251a0351.chunk.js.map