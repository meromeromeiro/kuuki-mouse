"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[632],{4632:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});var n=t(5043),l=t(9435),o=t(9408),i=t(579);const s=()=>{const e=(0,n.useRef)(null),r=(0,n.useRef)(null),t=(0,n.useRef)(null),s=(0,n.useRef)(null),c=(0,n.useRef)(null),a=(0,n.useRef)(null),u=(0,n.useRef)(null),[d,m]=(0,n.useState)([]),[h,p]=(0,n.useState)({width:1,height:1,color:"#ff0000",opacity:.5}),[f,w]=(0,n.useState)(null),[g,v]=(0,n.useState)(!0),x=(0,n.useCallback)(((e,r)=>`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${r})`),[]),y=(0,n.useMemo)((()=>x(h.color,h.opacity)),[h.color,h.opacity,x]);(0,n.useEffect)((()=>{if(!e.current)return;const n=e.current,i=n.clientWidth,d=n.clientHeight;r.current=new l.Z58,r.current.background=new l.Q1f(15658734);const m=i/d;t.current=new l.qUd(10*m/-2,10*m/2,5,-5,1,1e3),t.current.position.set(0,0,10),t.current.lookAt(0,0,0),s.current=new o.JeP({antialias:!0}),s.current.setSize(i,d),s.current.setPixelRatio(window.devicePixelRatio),n.appendChild(s.current.domElement),c.current=new l.YJl,c.current.name="PermanentPlanesGroup",r.current.add(c.current);const h=()=>{window.requestAnimationFrame(h),s.current&&r.current&&t.current&&s.current.render(r.current,t.current)};h();const p=()=>{if(t.current&&s.current&&n){const e=n.clientWidth,l=n.clientHeight,o=e/l,i=2*t.current.top;t.current.left=i*o/-2,t.current.right=i*o/2,t.current.top=i/2,t.current.bottom=i/-2,t.current.updateProjectionMatrix(),s.current.setSize(e,l),s.current.render(r.current,t.current)}};window.addEventListener("resize",p);const f=e=>{if(!t.current||!n)return;const r=n.getBoundingClientRect(),o=e.clientX-r.left,i=e.clientY-r.top,s=o/r.width*2-1,c=-i/r.height*2+1,a=new l.Pq0(s,c,0);a.unproject(t.current),w({x:a.x,y:a.y}),console.log(`Clicked World Coords: X=${a.x.toFixed(2)}, Y=${a.y.toFixed(2)}`)};return n.addEventListener("click",f),()=>{var e,o,i,d;if(window.removeEventListener("resize",p),n.removeEventListener("click",f),null===(e=r.current)||void 0===e||e.traverse((e=>{var r,t;e instanceof l.eaF&&(null===(r=e.geometry)||void 0===r||r.dispose(),Array.isArray(e.material)?e.material.forEach((e=>e.dispose())):null===(t=e.material)||void 0===t||t.dispose())})),a.current){var m,h,w;if(null===(m=a.current.geometry)||void 0===m||m.dispose(),Array.isArray(a.current.material))a.current.material.forEach((e=>e.dispose()));else null===(w=a.current.material)||void 0===w||w.dispose();null===(h=c.current)||void 0===h||h.remove(a.current)}null===(o=u.current)||void 0===o||o.dispose(),null===(i=s.current)||void 0===i||i.dispose(),n&&null!==(d=s.current)&&void 0!==d&&d.domElement&&n.removeChild(s.current.domElement),r.current=null,t.current=null,s.current=null,c.current=null,a.current=null,u.current=null}}),[]),(0,n.useEffect)((()=>{if(c.current&&r.current&&t.current&&s.current){if(a.current){var e,n,o;if(null===(e=a.current.geometry)||void 0===e||e.dispose(),Array.isArray(a.current.material))a.current.material.forEach((e=>e.dispose()));else null===(o=a.current.material)||void 0===o||o.dispose();null===(n=u.current)||void 0===n||n.dispose(),u.current=null,c.current.remove(a.current),a.current=null}if(f){const e=new l.bdM(h.width,h.height),n=new l.V9B({color:h.color,transparent:!0,opacity:h.opacity,side:l.$EB}),o=new l.eaF(e,n);o.position.set(f.x,f.y,.01),c.current.add(o),a.current=o,u.current=n,s.current.render(r.current,t.current)}else s.current.render(r.current,t.current)}}),[f,h,s,r,t,c]),(0,n.useEffect)((()=>{c.current&&r.current&&t.current&&s.current&&(c.current.children.filter((e=>e!==a.current)).forEach((e=>{var r,t;e instanceof l.eaF&&(null===(r=e.geometry)||void 0===r||r.dispose(),Array.isArray(e.material)?e.material.forEach((e=>e.dispose())):null===(t=e.material)||void 0===t||t.dispose());c.current.remove(e)})),d.forEach((e=>{const r=new l.bdM(e.width,e.height),t=new l.V9B({color:e.color,transparent:!0,opacity:e.opacity,side:l.$EB}),n=new l.eaF(r,t);n.position.set(e.x,e.y,0),c.current.add(n)})),s.current.render(r.current,t.current))}),[d,s,r,t,c,a]);const b=e=>{const{name:r,value:t,type:n}=e.target;p((e=>({...e,[r]:"number"===n?parseFloat(t):t})))};return(0,i.jsxs)("div",{className:"flex h-screen w-screen overflow-hidden relative",children:[(0,i.jsx)("div",{ref:e,className:"flex-grow h-full border-r border-gray-300"}),(0,i.jsxs)("div",{className:`\n                fixed top-4 right-4 p-6 bg-gray-800 bg-opacity-70 text-white rounded-lg shadow-lg\n                transition-all ease-in-out duration-300\n                ${g?"w-80":"w-16 overflow-hidden"}\n            `,children:[(0,i.jsx)("button",{onClick:()=>v(!g),className:"absolute top-2 right-2 bg-gray-700 text-white p-1 rounded-full hover:bg-gray-600 transition z-10","aria-label":g?"Collapse Panel":"Expand Panel",children:g?(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}):(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})}),g&&(0,i.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"width",className:"block text-sm font-medium",children:"Width:"}),(0,i.jsx)("input",{type:"number",id:"width",name:"width",value:h.width,onChange:b,step:"0.1",min:"0.1",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm text-gray-900 p-1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"height",className:"block text-sm font-medium",children:"Height:"}),(0,i.jsx)("input",{type:"number",id:"height",name:"height",value:h.height,onChange:b,step:"0.1",min:"0.1",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm text-gray-900 p-1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"color",className:"block text-sm font-medium",children:"Color:"}),(0,i.jsx)("input",{type:"color",id:"color",name:"color",value:h.color,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-1 h-10"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{htmlFor:"opacity",className:"block text-sm font-medium",children:["Opacity (",h.opacity,"):"]}),(0,i.jsx)("input",{type:"range",id:"opacity",name:"opacity",value:h.opacity,onChange:b,step:"0.01",min:"0",max:"1",className:"mt-1 block w-full"})]}),(0,i.jsxs)("div",{className:"text-sm",children:["Clicked Pos: ",f?`X: ${f.x.toFixed(2)}, Y: ${f.y.toFixed(2)}`:"Click on canvas"]}),(0,i.jsx)("div",{className:"w-full h-8 rounded-md border border-gray-600",style:{backgroundColor:y}}),(0,i.jsx)("button",{onClick:()=>{if(!f)return void alert("Please click on the canvas to select a position first.");const e={id:Date.now().toString(),...h,x:f.x,y:f.y};m((r=>[...r,e])),w(null)},disabled:!f,className:`\n                                w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white\n                                ${f?"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-400 cursor-not-allowed"}\n                            `,children:"Add Plane"}),(0,i.jsx)("button",{onClick:()=>{m([]),w(null)},className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Clear All"})]})]})]})}}}]);
//# sourceMappingURL=632.27071897.chunk.js.map