"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[278],{9278:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var o=r(5043),n=r(9435),s=r(9408);const l=40,a=[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,3,4,2,0,0,1],[1,0,0,1,4,3,0,1],[1,1,1,1,1,1,1,1]],i=1,c=2,u=3,d=4,h=5,x="#00ff00",g="#ffff00",p="#888888",w="#ff0000",y="#444444",C="#282c34";var m=r(579);const v=e=>{let{playerData:t,boxesData:r,wallsData:a,targetsData:i,gameDimensions:c,settings:u}=e;const d=(0,o.useRef)(null),h=(0,o.useRef)(null),x=(0,o.useRef)(null),g=(0,o.useRef)(null),p=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const e=d.current.clientWidth,t=d.current.clientHeight;h.current=new n.Z58,h.current.background=new n.Q1f((null===u||void 0===u?void 0:u.backgroundColor)||C);const r=c.width*l,o=c.height*l;x.current=new n.qUd(-e/2,e/2,t/2,-t/2,1,1e3),x.current.position.set(r/2-20,200,o/2-20),x.current.lookAt(r/2-20,0,o/2-20),x.current.zoom=.8*Math.min(e/r,t/o),x.current.updateProjectionMatrix(),g.current=new s.JeP({antialias:!0}),g.current.setSize(e,t),d.current.appendChild(g.current.domElement);const a=new n.$p8(16777215,.6);h.current.add(a);const i=new n.ZyN(16777215,.8);i.position.set(50,100,75),h.current.add(i);const w=new n.fTw(Math.max(r,o)+80,Math.max(c.width,c.height)+2,(null===u||void 0===u?void 0:u.gridColor)||y,(null===u||void 0===u?void 0:u.gridColor)||y);w.position.set(r/2-20,0,o/2-20),w.rotation.x=0,h.current.add(w),p.current=new n.YJl,h.current.add(p.current);const m=()=>{requestAnimationFrame(m),g.current.render(h.current,x.current)};m();const v=()=>{const e=d.current.clientWidth,t=d.current.clientHeight;g.current.setSize(e,t),x.current.left=-e/2,x.current.right=e/2,x.current.top=t/2,x.current.bottom=-t/2,x.current.zoom=.8*Math.min(e/r,t/o),x.current.updateProjectionMatrix()};return window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v),d.current&&g.current.domElement&&d.current.removeChild(g.current.domElement),g.current.dispose()}}),[c,null===u||void 0===u?void 0:u.backgroundColor,null===u||void 0===u?void 0:u.gridColor]),(0,o.useEffect)((()=>{if(h.current&&p.current){for(;p.current.children.length>0;){const e=p.current.children[0];p.current.remove(e),e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach((e=>e.dispose())):e.material.dispose())}if(a.forEach((e=>{const t=new n.bdM(l,l),r=new n.tXL({color:e.color,side:n.$EB}),o=new n.eaF(t,r);o.rotation.x=-Math.PI/2,o.position.set(e.x*l,20,e.y*l),p.current.add(o)})),i.forEach((e=>{const t=new n.rKP(10,14,32),r=new n.V9B({color:e.color,side:n.$EB}),o=new n.eaF(t,r);o.rotation.x=-Math.PI/2,o.position.set(e.x*l,.1,e.y*l),p.current.add(o)})),r.forEach((e=>{const t=new n.iNn(32,32,32),r=new n.tXL({color:e.color}),o=new n.eaF(t,r);o.position.set(e.x*l,20,e.y*l),p.current.add(o)})),t){const e=new n.iNn(30,30,30),r=new n.tXL({color:t.color}),o=new n.eaF(e,r);o.position.set(t.x*l,20,t.y*l),p.current.add(o)}}}),[t,r,a,i]),(0,m.jsx)("div",{ref:d,style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:0}})},f=e=>{let{settings:t,onSettingChange:r,onResetLevel:n,onShowInstructions:s}=e;const[l,a]=(0,o.useState)(!1),i=(e,t)=>{r(e,t)};return t?(0,m.jsxs)("div",{style:{position:"fixed",top:"10px",right:"10px",background:"rgba(0,0,0,0.7)",color:"white",padding:"10px",borderRadius:"5px",zIndex:1e3,minWidth:"200px"},children:[(0,m.jsx)("button",{onClick:()=>a(!l),style:{marginBottom:"10px",width:"100%"},children:l?"Hide Settings":"Show Settings"}),l&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Player Color: "}),(0,m.jsx)("input",{type:"color",value:t.playerColor,onChange:e=>i("playerColor",e.target.value)})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Box Color: "}),(0,m.jsx)("input",{type:"color",value:t.boxColor,onChange:e=>i("boxColor",e.target.value)})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Wall Color: "}),(0,m.jsx)("input",{type:"color",value:t.wallColor,onChange:e=>i("wallColor",e.target.value)})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Target Color: "}),(0,m.jsx)("input",{type:"color",value:t.targetColor,onChange:e=>i("targetColor",e.target.value)})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Grid Color: "}),(0,m.jsx)("input",{type:"color",value:t.gridColor,onChange:e=>i("gridColor",e.target.value)})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Background: "}),(0,m.jsx)("input",{type:"color",value:t.backgroundColor,onChange:e=>i("backgroundColor",e.target.value)})]}),(0,m.jsx)("button",{onClick:n,style:{marginTop:"10px",width:"100%"},children:"Reset Level (R)"})]}),(0,m.jsx)("button",{onClick:s,style:{marginTop:"5px",width:"100%"},children:"Instructions"})]}):null},b=()=>{const[e,t]=(0,o.useState)(a),[r,n]=(0,o.useState)({x:0,y:0}),[s,l]=(0,o.useState)([]),[b,k]=(0,o.useState)([]),[j,S]=(0,o.useState)([]),[E,M]=(0,o.useState)("playing"),[R,D]=(0,o.useState)([]),[L,z]=(0,o.useState)({playerColor:x,boxColor:g,wallColor:p,targetColor:w,gridColor:y,backgroundColor:C}),A=(0,o.useMemo)((()=>{var t;return{width:(null===(t=e[0])||void 0===t?void 0:t.length)||0,height:(null===e||void 0===e?void 0:e.length)||0}}),[e]),I=(0,o.useCallback)((()=>{const t={x:0,y:0},r=[],o=[],s=[];let a=0;e.forEach(((e,n)=>{e.forEach(((e,l)=>{switch(e){case c:t.x=l,t.y=n;break;case d:r.push({id:"box-"+a++,x:l,y:n});break;case u:o.push({x:l,y:n});break;case i:s.push({x:l,y:n});break;case h:r.push({id:"box-"+a++,x:l,y:n}),o.push({x:l,y:n})}}))})),n(t),l(r),k(o),S(s),M("playing"),D([])}),[e]);(0,o.useEffect)((()=>{I()}),[I]);const P=(0,o.useCallback)((()=>{if(0===b.length||0===s.length)return!1;const e=b.every((e=>s.some((t=>t.x===e.x&&t.y===e.y))));return e&&M("won"),e}),[s,b]);(0,o.useEffect)((()=>{"playing"===E&&P()}),[s,E,P]);const W=(0,o.useCallback)(((e,t)=>{if("won"===E)return;const o=r.x+e,a=r.y+t;if(o<0||o>=A.width||a<0||a>=A.height)return;if(j.some((e=>e.x===o&&e.y===a)))return;const i=s.findIndex((e=>e.x===o&&e.y===a));if(-1!==i){const r=o+e,n=a+t;if(r<0||r>=A.width||n<0||n>=A.height)return;if(j.some((e=>e.x===r&&e.y===n))||s.some((e=>e.x===r&&e.y===n)))return;const c=[...s];c[i]={...c[i],x:r,y:n},l(c)}n({x:o,y:a})}),[r,s,j,A,E]);(0,o.useEffect)((()=>{const e=e=>{if("won"!==E||"r"===e.key.toLowerCase())switch(e.key.toLowerCase()){case"arrowup":case"w":W(0,-1);break;case"arrowdown":case"s":W(0,1);break;case"arrowleft":case"a":W(-1,0);break;case"arrowright":case"d":W(1,0);break;case"r":I()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[W,I,E]);const B=(0,o.useMemo)((()=>({...r,color:L.playerColor})),[r,L.playerColor]),F=(0,o.useMemo)((()=>s.map((e=>({...e,color:L.boxColor})))),[s,L.boxColor]),N=(0,o.useMemo)((()=>j.map((e=>({...e,color:L.wallColor})))),[j,L.wallColor]),T=(0,o.useMemo)((()=>b.map((e=>({...e,color:L.targetColor})))),[b,L.targetColor]);return(0,m.jsxs)("div",{className:"h-full",children:["won"===E&&(0,m.jsxs)("div",{className:"win-message",children:["Congratulations! You Won!",(0,m.jsx)("button",{onClick:I,children:"Play Again (R)"})]}),(0,m.jsx)("div",{id:"info-text",style:{position:"absolute",top:"10px",left:"10px",color:"white",zIndex:10},children:"Use Arrow/WASD keys to move. R to reset."}),(0,m.jsx)(v,{playerData:B,boxesData:F,wallsData:N,targetsData:T,gameDimensions:A,settings:L}),(0,m.jsx)(f,{settings:L,onSettingChange:(e,t)=>{z((r=>({...r,[e]:t})))},onResetLevel:I,onShowInstructions:()=>{alert("Sokoban Game Instructions:\n\n- Use Arrow Keys or WASD to move the player (green cube).\n- Push the yellow boxes onto the red target circles.\n- All targets must be covered by boxes to win.\n- Press 'R' to reset the current level.\n- You can customize colors in the 'Show Settings' panel.\n- On-screen directional buttons are draggable.")}})]})}}}]);
//# sourceMappingURL=278.fc3e1597.chunk.js.map